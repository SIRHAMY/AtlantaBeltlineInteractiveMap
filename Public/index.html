<html>
<head>
  <title>Atlanta Beltline</title>
  <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
  <script src="https://code.jquery.com/jquery-2.2.1.min.js" charset="utf-8"></script>
  <link rel="stylesheet" type="text/css" href="/css/style.css">
</head>
<body>

  <div id="map"></div>

  <script>
    // Size of the canvas on which the map will be rendered
  var width = 1000,
    height = 1100,
    // SVG element as a JavaScript object that we can manipulate later
    svg = d3.select("#map").append("svg")
      .attr("width", width)
      .attr("height", height);

      // Normally you'd look this up. This point is in the middle of Syria
    var center = [-84.43231544509, 33.65];

    // Instantiate the projection object
    var projection = d3.geo.conicConformal()
        .center(center)
        .clipAngle(180)
        // Size of the map itself, you may want to play around with this in
        // relation to your canvas size
        .scale(121500)
        // Center the map in the middle of the canvas
        .translate([width / 2, height / 2])
        .precision(0.1);

        // Assign the projection to a path
    var path = d3.geo.path().projection(projection);

    d3.json("rsrc/NPUs.json", function(err, data) {
      $.each(data.features, function(i, feature) {
        svg.append("path")
          .datum(feature.geometry)
          .attr("class", "feature")
          .attr("d", path)
          .style("fill", function(d, i) { return '#FFFFFF' })
          .attr('stroke', function(d) {return '#000000'});
      });

      svg.selectAll("text")
        .data(data.features)
        .enter()
        .append("text")
        .attr("transform", function (d) { return "translate(" + path.centroid(d) + ")"})
        .text(function(d) { return d.properties.NPU; });
});
  </script>
</body>
</html>
